api.twist.com {
  tls internal # TODO: remove this line

  reverse_proxy /socket.io* app:5050

  reverse_proxy app:5050 {
    header_up X-Real-IP {remote}
    header_up X-Forwarded-For {remote}
    header_up X-Forwarded-Proto {scheme}
    header_up Host {host}
  }
}

twist.com {
  tls internal # TODO: remove this line

  root * /var/www/dist
  try_files {path} /index.html
  file_server
  header {
    Cache-Control "public, max-age=31536000, immutable"
  }
}