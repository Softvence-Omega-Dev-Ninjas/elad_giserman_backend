model User {
  id String @id @default(uuid())

  // Auth
  email    String  @unique
  username String  @unique
  googleId String? @unique // google id or firebase uid
  password String? // hashed password (nullable for social accounts)

  // Contact
  mobile String?

  // Profile
  name      String? @default("Unnamed User")
  avatarUrl String? @default("https://www.gravatar.com/avatar/000000000000000000000000000000?d=mp&f=y")

  // Settings
  role              UserRole     @default(USER)
  status            UserStatus   @default(ACTIVE)
  isVerified        Boolean      @default(false)
  timezone          String       @default("UTC") // e.g., "America/New_York"
  language          UserLanguage @default(EN)
  allowNotification Boolean      @default(true)

  // Logout tracking
  isLoggedIn   Boolean   @default(false)
  lastLoginAt  DateTime?
  lastLogoutAt DateTime?
  lastActiveAt DateTime?

  // OTP
  otp          String? // 4 digit hashed OTP code
  otpExpiresAt DateTime?
  otpType      OtpType?

  // Subscription, based on last successful payment (overwrite previous one)
  subscriptionStatus SubscriptionStatus? // ensure during successful payment in webhook
  stripeCustomerId   String?             @unique // ensure during payment intent creation

  currentPlanId String?
  currentPlan   SubscriptionPlan? @relation(fields: [currentPlanId], references: [id], onDelete: SetNull)

  // Notifications
  notifications    UserNotification[]
  userSubscription UserSubscription[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@map("users")
}

enum UserRole {
  SUPER_ADMIN
  ADMIN
  ORGANIZER
  USER
}

enum UserStatus {
  ACTIVE
  INACTIVE
  BANNED
  DELETED
}

enum OtpType {
  REGISTER // for register (one time per user)
  LOGIN
  RESET //for reset password
  PHONE //for adding phone
}

enum UserLanguage {
  EN
  ES
  DE
  FR
  IT
  JA
  KO
  NL
  PT
  RU
  ZH
}
